# 用户属性 API 文档

## 用户概述

用户是指 Agent/workflow 发起对话的终端用户，GPTBots 支持开发者为不同用户设置唯一身份标识ID，通过该用户ID`user_id`可以在不同渠道之间进行用户身份关联。

## 用户体系

- 用户来源平台：Livechat, Intercom, Widget, Telegram 等
- 匿名ID：由平台自动生成
- UserId：由开发者设置的唯一身份标识
- ConversationId：对话唯一标识

## 匿名ID 取值逻辑

| 匿名ID来源平台 | 匿名ID取值逻辑 | 说明 |
| --- | --- | --- |
| Telegram | Telegram用户ID | 用户的唯一数字标识符 |
| LINE | LINE 用户ID | LINE 用户的唯一标识符 |
| LiveChat | LiveChat threadId | 会话线程的唯一标识符 |
| WhatsApp | WhatsApp 用户 ID | 基于用户的手机号码 |
| API | 无匿名ID | 用户仅可使用user_id生成对话ID |
| Widget | 浏览器指纹ID | 基于浏览器指纹生成随机ID |

## 对话类型

| 对话类型 | 字段值 | 说明 |
| --- | --- | --- |
| API | API | API调用产生的对话ID |
| Widget | WIDGET | 部件气泡产生的对话ID |
| Iframe | EMBED | Iframe产生的对话ID |

## 设置用户ID 的应用场景

- Tools：AI Agent 调用 Tools 时会将 UserId 放在 Header 中
- 用户属性：用户属性信息将被归属于该 UserId
- 对话日志：对话日志记录将被归属于该 UserId
- 事件回调：事件回调上报时会携带该信息
